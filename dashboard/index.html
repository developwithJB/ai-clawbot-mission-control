<!doctype html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Mission Control TV</title><style>body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;background:#0a0f19;color:#e6edf3;margin:0;padding:24px}.grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:16px}.card{background:#101826;border:1px solid #233042;border-radius:10px;padding:16px}.muted{color:#8b98a5}.warn{color:#ffcc66;font-weight:700}.bad{color:#ff7b72;font-weight:700}ul{padding-left:18px}</style></head><body><h1>Mission Control Hosted TV</h1><div id="published" class="muted">Last published: N/A</div><div id="stale" class="warn"></div><div class="grid" style="margin-top:16px"><section class="card"><h2>Office</h2><div id="office">-</div></section><section class="card"><h2>Tasks</h2><div id="tasks">-</div></section><section class="card"><h2>Approvals</h2><div id="approvals">-</div></section><section class="card"><h2>Events</h2><div id="events">-</div></section></div><script>function safe(v,f='N/A'){if(v==='—'||v==='–'||v==null||v==='')return f;return v}function ageMinutes(iso){return Math.max(0,Math.floor((Date.now()-new Date(iso).getTime())/60000))}async function render(){try{const r=await fetch('./snapshot.json?_='+Date.now(),{cache:'no-store'});if(!r.ok)throw new Error();const s=await r.json();document.getElementById('published').textContent='Last published: '+safe(s.last_published_at);if(s.last_published_at){const age=ageMinutes(s.last_published_at);document.getElementById('stale').textContent=age>8?`⚠ Snapshot stale (${age}m old)`:''}document.getElementById('office').innerHTML=`<div>Health: <strong>${safe(s.office?.health_states?.overall,'-')}</strong></div><ul>${(s.office?.units||[]).map(u=>`<li>${safe(u.code)} ${safe(u.codename)} - ${safe(u.status,'-')}</li>`).join('')}</ul>`;document.getElementById('tasks').innerHTML=`<div>Total: <strong>${safe(s.tasks?.counts?.total,0)}</strong></div><div>Doing: ${safe(s.tasks?.counts?.doing,0)} | Blocked: ${safe(s.tasks?.counts?.blocked,0)}</div><ul>${(s.tasks?.sample_titles||[]).map(t=>`<li>${safe(t,'-')}</li>`).join('')}</ul>`;document.getElementById('approvals').innerHTML=`<div>Pending: <strong>${safe(s.approvals?.counts?.pending,0)}</strong></div><ul>${(s.approvals?.pending||[]).map(a=>`<li>${safe(a.id)}: ${safe(a.item)}</li>`).join('')}</ul>`;document.getElementById('events').innerHTML=`<ul>${(s.events?.recent||[]).slice(0,8).map(e=>`<li>${safe(e.timestamp,'-')} - ${safe(e.summary,'-')}</li>`).join('')}</ul>`}catch{document.getElementById('stale').innerHTML='<span class="bad">Unable to load snapshot.json</span>'}}render();setInterval(render,30000);</script></body></html>